# 计算机系统概论

- 程序在执行前放在主存中，在执行时放在CPU中。
- 存储器用来存放程序和数据。

> 主存储器是计算机各种信息的存储和交流中心，可与CPU、I/O交换信息。当前正在运行的程序和数据都是放在主存储器中的。

- 控制器主要用来实现计算机本身运行过程的自动化。
- 计算机中各部件来往信号：地址、数据、控制信号。

# 主存储器

==中心地位==。

## 分类

易失性存储器。

> RAM，可通过指令随机的、个别的对各个存储器读写，停电信息丢失。讨论主存一般都指RAM。
>
> - SRAM
>
> > 静态，用==触发器==保存信息。集成度低，功耗大。
>
> - DRAM
>
> > 动态，用==MOS电容存储电荷==保存信息，需不断充电。集成度高，功耗小。

非易失性存储器。

> - ROM
>
> > 制造时写入内容，以后只能读不能再写入。可用==熔丝，二极管，晶体管==，内容不会变。
>
> - PROM
>
> > 用==熔丝==，初始熔丝全部接通，写入时断开，一次性。
>
> - EPROM
>
> >单管，编程次数不受限制，可==紫外线擦除==。
>
> - E^2^PROM
>
> >可==电擦除==，次数受限制。读写可按位或字节进行。可用==两个晶体管==。
>
> - Flash Memory
>
> >单管，电擦除，整体擦除。

## 存储容量扩展

**1.位扩展**

- 扩充字长。
- 将地址、片选信号、读写控制端并联，数据端分别引出。
- 横向扩展。

**2.字扩展**

- 增加字的数量。
- 串联，纵向扩展，地址高位做片选。

**3.字位扩展**
在字扩展的基础上扩充数据线。
**4.存储控制**
设附加电路。

DRAM采用“读出”的方式刷新。

再生周期（刷新周期）：==2ms==。

==再生过程==：只改变行选择线地址，每次再生一行，依次对存储器的每一行读出，完成刷新。

8203通常处于闲置状态，此时有访存请求和刷新请求，首先保证访存。
8203不是闲置状态时，刷新请求优先。

增加校验位来设置校验线路。

**多体交叉存储器**
地址码的低位经过译码选择不同的存储模块，高位指向模块内部的存储字。

# 指令系统

**指令组成**

1. 操作码（*说明操作的性质和功能*）
2. 操作数的地址（*CPU取操作数*）
3. 操作结果的存储地址（*存运算结果*）
4. 下一条指令的地址（*顺序时，PC 给出，转移等时，指令给。*）

**指令操作码的扩展**

操作码的长度为K，该机器最多指令数目为==2^K^==。

> 通常在指令中用一个固定长度的字段表示基本操作码，而对于一部分不需要某个地址码的指令，把它们的操作码扩充到该地址字段，能充分利用指令字的各个字段，能在不增加指令长度的情况下扩充操作码的长度，表示更多指令。
> 书上例题0000~1110供三地址指令，1111加上其后的四位供二地址指令，以此类推。

字长越长，计算机的运算精度越高。地址码长度若为n，可寻址2^n^个字或字节。
**转移指令**
C+Z：无符号数<=
N异或V+Z：有符号数<=
N异或V：有符号数<

**特权指令**
为了安全，只能用于操作系统或其他系统软件。

**RISC**
执行时间=指令数 * 每条指令所需的平均周期数  * 每个机器周期的时间。 

> 特点：避免复杂指令；访问寄存器多，访问存储器少；大部分指令在一个或少于一个周期内完成......

# 中央处理器

==控制器==+==运算器==。

## 控制器

组成：

- 程序计数器PC

> 存放正在执行指令的地址或下一指令地址。

- 指令寄存器IR

> 存放正在执行的指令。

- 指令译码器或操作码译码器

> 对IR的操作码分析解释，产生控制信号。

- 脉冲源及启停线路

> 产生时钟脉冲，控制时序信号的发生或停止。

- 时序控制信号形成部件

> 形成每个操作对应的时间标志。

**功能**
取指令；分析指令；
执行指令；控制程序和数据的输入和结果输出；
对异常情况和某些请求的处理。

> *中断请求和DMA请求，前者执行完当前指令，后者执行完当前机器周期再让出总线给I/O设备。*

## 微程序控制计算机的基本工作原理

**微指令**
同时发出的控制信号所执行的一组微操作。

**微程序**
微指令序列的集合。

**控制存储器**
存储控制命令（信号）与下一条执行的微指令地址（下指）。==ROM==可实现。

执行一条指令实际上就是执行一段存放在控制存储器中的微程序。

微指令油控制字段和下址字段组成。
*23个控制信号，对应控制字段有23个控制位。*

当前正在执行的微指令从控制存储器取出后放在微指令寄存器中，该寄存器的各个控制位的输出直接连到各个控制门上。

**微程序控制字段的编译法**

1. 直接控制法
2. 字段直接编译法

> 其微命令是互斥的。

3. 字段间接编译法
4. 常数源字段E

**微指令格式**
水平型微指令

> 在一条微指令中定义并执行多个并行操作微命令。

垂直型微指令

> 由操作码规定微指令的功能。

# 存储系统

CPU和主存中间设置了cache，一般由SRAM组成。

**cache组织**：

1. 地址映像

> - 直接映像
> - 全相联映像
> - 组相联映像
>   r=0时，组变直；c=0时，组变全。

**替换算法**
FIFO、LRU。

**cache地址的监听**
为使cache中数据和主存相应单元内容保持一致。

**虚拟存储器**
主存－辅存层次的信息传送单位分为：段、页、段页。

程序按模块分段，再分页。
把页表最活跃部分存放在快速存储器中组成快表，为减小时间开支。
段页程序对主存的调入调出按页面进行，又可以按段实现共享和保护。
TLB：转换旁路缓冲器。

# 辅助存储器

==技术指标：==
存储密度：单位长度或单位面积磁层表面所存储的二进制信息量。

存储容量：磁表面存储器所能存储的二进制信息总量。

寻址时间：平均T~a~=(t~smax~+t~smin~)/2+(t~wmax~+t~wmin~)/2

数据传输率：单位时间内与主机之间传送数据的位数或字数。

**磁记录方式**
- RZ
- NRZ
- NRZ1
- PM
- FM
- MFM
后三者有自同步能力。

# 显示器

**分辨率**
像素个数。

**灰度级**
像素点亮暗差别。

VRAM容量=分辨率* 灰度级。

刷新带宽=刷新存储器容量* 帧频
